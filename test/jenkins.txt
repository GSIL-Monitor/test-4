local——jenkins
用户名和密码
admin/zept12345678
developer1/developer1
developer2/developer2

########################    shell: ���ݾɰ����滻�°������ʧ�ܣ������þɵİ�
cp /data/work/springboot/target/springboot-0.0.1-SNAPSHOT.jar /data/work/backup
cd /data/work/springboot/target
ps -ef|grep -v grep|grep springboot-0.0.1-SNAPSHOT.jar|awk '{print $2}'|xargs kill -9
cp ${ITEM_ROOTDIR}/workspace/springboot/springboot/target/springboot-0.0.1-SNAPSHOT.jar /data/work 
nohup java -Xmx1024m -Xms512m -Xmn128m -jar springboot-0.0.1-SNAPSHOT.jar  --spring.profiles.active=test  >springboot.log 2>&1 &
if [ "$?" == "0" ]
then 
      echo "springboot is running"  
      nohup java -Xmx1024m -Xms512m -Xmn128m -jar springboot-0.0.1-SNAPSHOT.jar  --spring.profiles.active=test --server.port=9091 >springboot9091.log 2>&1 &
else
ps -ef|grep -v grep|grep springboot-0.0.1-SNAPSHOT.jar|awk '{print $2}'|xargs kill -9
cp  /data/work/backup/springboot-0.0.1-SNAPSHOT.jar /data/work/springboot/target/
nohup java -Xmx1024m -Xms512m -Xmn128m -jar springboot-0.0.1-SNAPSHOT.jar   --spring.profiles.active=test   >springboot.log 2>&1 &
fi
########################


http://www.cnblogs.com/zz0412/p/jenkins_jj_01.html

�����ʼ������⣺

#################################
cd /data/zhuanxiang/tomcat7/bin
ps -ef|grep -v grep|grep tomcat7|awk '{print $2}'|xargs kill -9
cp  /data/zhuanxiang/tomcat7/webapps/zxxt  /data/backup/source
rm -r  ../webapps/zxxt*
cp  ${ITEM_ROOTDIR}/workspace/hui_dev/release/hui/zxxt.war /data/zhuanxiang/tomcat7/webapps
cp ../webapps/release/hui/zxxt.war ../webapps
rm -r  ../webapps/release
./startup.sh 
if [ "$?" == "0" ]
then 
	  echo "new code is running"  
else
    ps -ef|grep -v grep|grep tomcat7|awk '{print $2}'|xargs kill -9
     rm -r  ../webapps/zxxt*
	cp  /data/backup/source/zxxt.war /data/zhuanxiang/tomcat7/webapps/
	echo "old code is running"  
	./startup.sh 
fi
#################################



Default Subject������֪ͨ:$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!

Default Content��

<hr/>

(���ʼ��ǳ����Զ��·��ģ�����ظ���)<br/><hr/>

��Ŀ���ƣ�$PROJECT_NAME<br/><hr/>

������ţ�$BUILD_NUMBER<br/><hr/>

svn�汾�ţ�${SVN_REVISION}<br/><hr/>

����״̬��$BUILD_STATUS<br/><hr/>

����ԭ��${CAUSE}<br/><hr/>

������־��ַ��<a href="${BUILD_URL}console">${BUILD_URL}console</a><br/><hr/>

������ַ��<a href="$BUILD_URL">$BUILD_URL</a><br/><hr/>

�����:${JELLY_SCRIPT,template="html"}<br/><hr/>

�������һ�³��õ����ԡ�
2.1.1 ȫ���������

1. Override Global Settings�������ѡ���ò����ʹ��Ĭ�ϵ�E-mail Notification֪ͨѡ���֮��������ͨ��ָ����ͬ��( Ĭ��ѡ��)�����������и��ǡ�

2. Default Content Type��ָ�����������ʼ����ݵ����ͣ���Text��HTML����.

3. Use List-ID Email Header��Ϊ���е��ʼ�����һ��List-ID���ʼ���ͷ��������Ϳ������ʼ��ͻ���ʹ�ù��ˡ���Ҳ����ֹ�ʼ������˴󲿷ֵ��Զ��ظ�(�����뿪�칫�ҡ��ݼٵȵ�)�������ʹ����ϰ�ߵ��κ����ƻ���ID�ţ��������Ǳ��������������һ�ָ�ʽ(��ʵ��ID����Ҫ������<��>�����)��
<ci-notifications.company.org>
Build Notifications <ci-notifications.company.org>
��Build Notifications�� <ci-notifications.company.org>
���ڸ���ϸ��List-ID˵�������RFC-2919.

4. Add 'Precedence: bulk' Email Header���������ȼ�,����ϸ˵�������RFC-3834.

5. Default Recipients���Զ���Ĭ�ϵ����ʼ��ռ����б����û�б���Ŀ���ø���,�ò����ʹ������б�����������Ŀ����ʹ��$ DEFAULT_RECIPIENTS����������Ĭ���б��Լ�����µĵ�ַ����Ŀ������ӳ��ͣ�cc:�����ʼ���ַ����,CC:someone@somewhere.com

6. Reply To List���ظ��б�, A comma separated list of e-mail addresses to use in the Reply-To header of the email. This value will be available as $DEFAULT_REPLYTO in the project configuration.

7. Emergency reroute���������ֶβ�Ϊ�գ����еĵ����ʼ������������͵��õ�ַ�����ַ�б���

8. Excluded Committers����ֹ�ʼ����ʼ�ϵͳ��Ϊ�������ʼ�,�ʼ��б�Ӧ��û����չ���˻���(��:@domain.com),����ʹ�ö��ŷָ�

9. Default Subject���Զ����ʼ�֪ͨ��Ĭ���������ơ���ѡ�������ʼ��������ֶ����滻һЩ������������Ϳ����ڹ����а���ָ���������Ϣ��

10. Maximum Attachment Size���ʼ���󸽼���С��

11. Default Content���Զ����ʼ�֪ͨ��Ĭ���������塣��ѡ�������ʼ����������滻һЩ������������Ϳ����ڹ����а���ָ���������Ϣ��

12. Default Pre-send Script��Ĭ�Ϸ���ǰִ�еĽű���ע��grooy�ű�����������ĳƪ�����Ͽ����ģ���һ��׼ȷ����

13. Enable Debug Mode�����ò���ĵ���ģʽ���⽫���Ӷ������־�����������־�Լ�Jenkins����־���ڵ���ʱ�����õģ�����������������

14. Enable Security������ʱ������÷��ͽű���������ֱ�ӽ���Jenkinsʵ��������û���ͼ����Jenkins�������ʵ�������׳�һ����ȫ�쳣��

15. Content Token Reference���ʼ��п���ʹ�õı��������еı������ǿ�ѡ�ġ����������鿴ȫ���ʼ������½ڡ�
2.1.2 ȫ���ʼ�����

Ps�����Ÿо��е���ͷ���Ա���Jenkinsҳ�濴Ҫ��Щ��

email-ext�������ʹ�ñ�������̬�������ݵ��ʼ�����������������С�������һ����$(��Ԫ����)��ʼ�����Կո�������ַ�������һ���ʼ�����ʱ����������������ֶε����б�������ͨ����ʵ��ֵ��̬���滻��ͬ���������еġ�ֵ���ܰ��������ı������������滻����ʵ�����ݡ�

���磬��Ŀ����ҳ��Ĭ����������ݷֱ��Ӧ����ȫ������ҳ���DEFAULT_SUBJECT��DEFAULT_CONTENT����������Զ���ʹ��ȫ�ֵ����á�ͬ���������е�Subject��Content�ֱ��Ӧ������Ŀ����ҳ���DEFAULT_SUBJECT��DEFAULT_CONTENT��������Ҳ���Զ���ʹ����Ŀ�����á����ڱ����еġ�ֵ���ܰ��������ı��������Ծ���Ϊ�������ٵش�����ͬ������㣺ȫ�ּ���(������Ŀ)��ר������(��һ��Ŀ)������������(�������)��

�����Ҫ�鿴���п��õı���������Ե������ҳ��Content Token Reference���ʺŻ�ȡ��ϸ����Ϣ��

���еı������ǿ�ѡ�ģ�ÿ�������������±�ʾ���ַ�������ʹ��name=��value�����������ͺ�������ʹ��name=value�����{��}�������û�б������򲻻ᱻ������ʾ����$TOKEN,${TOKEN},${TOKEN,count=100},${ENV,var=��PATH��}

��ʾ����Ӣ�Ķ��ŷָ������Ĳ�����

�����ҽ���һ�³��õ����ԡ�

     ${FILE,path="PATH"} ����ָ���ļ���·�����ĺ�������ڹ����ռ��Ŀ¼��
        path�ļ�·����ע�⣺�ǹ�����Ŀ¼�����·����
     ${BUILD_NUMBER} ��ʾ��ǰ�����ı�š�
     ${JOB_DESCRIPTION} ��ʾ��Ŀ������
     ${SVN_REVISION} ��ʾsvn�汾�š���֧��Subversion������ڵ�SVN_REVISION_n�汾��
     ${CAUSE} ��ʾ˭��ͨ��ʲô����������ι�����
     ${CHANGES } -��ʾ��һ�ι���֮��ı仯��
        showPaths ���Ϊ true,��ʾ�ύ�޸ĺ�ĵ�ַ��Ĭ��false��
        showDependencies ���Ϊtrue����ʾ��Ŀ����������Ĭ��Ϊfalse
        format �����ύ��Ϣ��һ������%X���ַ���������%a��ʾ���ߣ�%d��ʾ���ڣ�%m��ʾ��Ϣ��%p��ʾ·����%r��ʾ�汾��ע�⣬���������еİ汾ϵͳ��֧��%d��%r�����ָ��showPaths�������ԡ�Ĭ�ϡ�[%a] %m\\n����
        pathFormat һ��������%p�����ַ�����������ʾ��ô��ӡ·����
     ${BUILD_ID}��ʾ��ǰ�������ɵ�ID��
     ${PROJECT_NAME} ��ʾ��Ŀ��ȫ��������AbstractProject.getFullDisplayName��
     ${PROJECT_DISPLAY_NAME} ��ʾ��Ŀ����ʾ���ơ�����AbstractProject.getDisplayName��
     ${SCRIPT} ��һ���ű������Զ�����Ϣ���ݡ��Զ���ű�Ӧ�÷���"$JENKINS_HOME/email-templates"����ʹ���Զ���ű�ʱ��Ĭ������$JENKINS_HOME/email-templatesdirectoryĿ¼��������Ŀ¼�����ᱻ������
         script ����ʹ�õ�ʱ�򣬽���ֻ�����һ��ֵ�ᱻ�ű�ʹ�ã�����ͬʱʹ��script��template����
         template�����simpletemplateengine��ʽģ�塣
     ${JENKINS_URL} ��ʾJenkins��������url��ַ���������ϵͳ����ҳ���ģ���
     ${BUILD_LOG_MULTILINE_REGEX}��������ʽƥ�䲢��ʾ������־��
         regex java.util.regex.Pattern ����������ʽƥ��Ĺ�����־����Ĭ��ֵ����Ϊ�ա�
         maxMatches ƥ���������������Ϊ0����ƥ�����С�Ĭ��Ϊ0��
         showTruncatedLines ���Ϊtrue������[...truncated ### lines...]�С�Ĭ��Ϊtrue��
         substText ����ǿգ��Ͱ��ⲿ�����֣����������У�������ʼ���Ĭ��Ϊ�ա�
        escapeHtml ���Ϊtrue����ʽ��HTML��Ĭ��Ϊfalse��
         matchedSegmentHtmlStyle ����ǿգ����HTML��ƥ�����������Ϊ<b style=��your-style-value��> html escaped matched line </b>��ʽ��Ĭ��Ϊ�ա�
     ${BUILD_LOG} ��ʾ���չ�����־��
         maxLines ��־�����ʾ��������Ĭ��250�С�
         escapeHtml ���Ϊtrue����ʽ��HTML��Ĭ��false��
     ${PROJECT_URL} ��ʾ��Ŀ��URL��ַ��
     ${BUILD_STATUS} -��ʾ��ǰ������״̬(ʧ�ܡ��ɹ��ȵ�)
     ${BUILD_URL} -��ʾ��ǰ������URL��ַ��
     ${CHANGES_SINCE_LAST_SUCCESS} -��ʾ��һ�γɹ�����֮��ı仯��
         reverse�ڶ�����ʾ�½��Ĺ�����Ĭ��false��
         format����������Ϣ��һ������%X���ַ���������%cΪ���еĸı䣬%nΪ������š�Ĭ�ϡ�Changes for Build #%n\n%c\n����
         showPaths,changesFormat,pathFormat�ֱ�����${CHANGES}��showPaths��format��pathFormat������
     ${CHANGES_SINCE_LAST_UNSTABLE} -��ʾ��ʾ��һ�β��ȹ̻��߳ɹ��Ĺ���֮��ı仯��
        reverse�ڶ�����ʾ�½��Ĺ�����Ĭ��false��
         format����������Ϣ��һ������%X���ַ���������%cΪ���еĸı䣬%nΪ������š�Ĭ�ϡ�Changes for Build #%n\n%c\n����
         showPaths,changesFormat,pathFormat�ֱ�����${CHANGES}��showPaths��format��pathFormat������
     ${ENV} �C��ʾһ������������
         var�C ��ʾ�û������������ơ����Ϊ�գ���ʾ���У�Ĭ��Ϊ�ա�
     ${FAILED_TESTS} -�����ʧ�ܵĲ��ԣ���ʾ��Щʧ�ܵĵ�Ԫ������Ϣ��
     ${JENKINS_URL} -��ʾJenkins�������ĵ�ַ��(�����ڡ�ϵͳ���á�ҳ�ı���)��
     ${HUDSON_URL} -���Ƽ�����ʹ��$JENKINS_URL
     ${PROJECT_URL} -��ʾ��Ŀ��URL��
     ${SVN_REVISION} -��ʾSVN�İ汾�š�
     ${JELLY_SCRIPT} -��һ��Jelly�ű�ģ�����Զ�����Ϣ���ݡ�������ģ��ɹ����ã�HTML��TEXT���������$JENKINS_HOME/email-templates���Զ����滻������ʹ���Զ���ģ��ʱ����template�����������Ʋ�������.jelly����
         templateģ�����ƣ�Ĭ�ϡ�html����
     ${TEST_COUNTS} -��ʾ���Ե�������
        var�C Ĭ�ϡ�total����
            total -���в��Ե�������
             fail -ʧ�ܲ��Ե�������
             skip -�������Ե�������
